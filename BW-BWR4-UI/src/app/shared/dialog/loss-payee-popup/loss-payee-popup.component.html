<div mat-dialog-content>
    <div class="topcontent"></div>
    <app-messages>{{ errorMessage }}</app-messages>
    <form [formGroup]="lossPayeeAdd" class="lienholder-form" name="lossPayeeAdd">
        <mat-accordion>
            <mat-expansion-panel class="bwr-mat-expansion-panel" multi hideToggle [expanded]="true">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Add Loss Payee/Additional Interest
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <p>Please provide Loss Payee or Additional Interest Information.</p>
                <div class="col col-3  col-sm-12">
                    <mat-radio-group aria-label="Select an option" id="type" formControlName="type" >
                        <div class="row">
                            <div class="col  col-lg-4 col-sm-2 col-6 pr-1 "  *ngIf="!(hiddenField.includes('LP'))">
                                <mat-radio-button value="LP" (change)="onTypeChange('LP')">Loss Payee</mat-radio-button>&nbsp;
                                <mat-icon class="info-icon checkbox-info align-self-center" aria-label="icon" matTooltip=""
                                aria-label="" id="additionalInterestHelp" matTooltipClass="bwr-tooltip" (click)="loadHelpText('337')">info</mat-icon>
                            </div>
                            <div class="col  col-lg-4 col-sm-2 col-6" *ngIf="!(hiddenField.includes('AI'))">
                                <mat-radio-button value="AI" (change)="onTypeChange('AI')">Additional Interest</mat-radio-button> &nbsp;
                                <mat-icon class="info-icon checkbox-info align-self-center" aria-label="icon" matTooltip=""
                                aria-label="" id="additionalInterestHelp" matTooltipClass="bwr-tooltip" (click)="loadHelpText('343')">info</mat-icon>
                            </div>


                        </div>
                    </mat-radio-group>
                </div>
                <div>
                    <div class="row">
                        <div class="col-md-4">
                            <mat-form-field class="field-full-width mandatory-field" appearance="outline" *ngIf="lossPayeeAdd.value.type === 'LP'">
                                <mat-label>Loss Payee
                                </mat-label>
                                <input matInput
                                    placeholder="Loss Payee"
                                    maxlength="30" value="" id="lossPayeeName" formControlName="institutionName">
                                <mat-error class="" id="firstnameReq" *ngIf="hasError('institutionName', 'required')">
                                   Loss Payee is required
                                </mat-error>
                                <mat-error class="" id="firstnamePat" *ngIf="hasError('institutionName', 'pattern')">
                                    Enter valid Loss Payee
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field class="field-full-width mandatory-field" appearance="outline" *ngIf="lossPayeeAdd.value.type === 'AI'">
                                <mat-label>Additional Interest

                                </mat-label>

                                <input matInput
                                    placeholder="Additional Interest"
                                    maxlength="30" value="" id="additionalInterestName" formControlName="firstName">

                                <mat-error class="" id="firstnameReq" *ngIf="hasError('firstName', 'required')">
                                    Additional Interest is required
                                </mat-error>
                                <mat-error class="" id="firstnamePat" *ngIf="hasError('firstName', 'pattern')">
                                    Enter valid Additional Interest
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <mat-form-field class="field-full-width mandatory-field" appearance="outline">
                                <mat-label>Address</mat-label>
                                <input matInput placeholder="Address" maxlength="30" value="" id="lossPayeeAddress"
                                    formControlName="address">
                                <mat-error class=" " id="addressReq" *ngIf="hasError('address', 'required')">
                                    Address is required
                                </mat-error>
                                <mat-error class=" " id="addressPat" *ngIf="hasError('address', 'pattern')">
                                    Enter valid Address
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <mat-form-field class="field-full-width mandatory-field" appearance="outline">
                                <mat-label>City</mat-label>
                                <input matInput placeholder="city" maxlength="28" value="" id="lossPayeeCity"
                                    formControlName="city">
                                <mat-error class=" " id="cityReq" *ngIf="hasError('city', 'required')"><em
                                        class="fas fa-exclamation-triangle pr-1"></em>City is required </mat-error>
                                <mat-error class="" id="cityValid" *ngIf="hasError('city', 'pattern')">
                                    Enter valid City
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <mat-form-field class="field-full-width bwr-dropdown mandatory-field "
                                        appearance="outline">
                                        <mat-label>State</mat-label>
                                        <mat-select placeholder="state" id="lossPayeeState" formControlName="state">
                                            <mat-option value="">Select</mat-option>
                                            <mat-option *ngFor="let stateVal of stateValues" [value]="stateVal.key">
                                                {{stateVal.displayvalue}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error class="" id="stateReq" *ngIf="!lossPayeeAdd.controls.state?.valid">
                                            State is required
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-5 col-sm-12 col-xs-12">
                                    <mat-form-field class="field-full-width mandatory-field" appearance="outline">
                                        <mat-label>Zip Code</mat-label>
                                        <input matInput placeholder="xxxxx-xxxx" value="" id="lossPayeeZipcode" minlength="5"
                                            maxlength="10" formControlName="zipcode" appZipcodeFormat>
                                        <mat-error class=" " id="zipcodeReq" *ngIf="hasError('zipcode', 'required')"><em
                                                class="fas fa-exclamation-triangle pr-1"></em>ZIP code is required
                                        </mat-error>
                                        <mat-error class=" " id="zipcodeValid"
                                            *ngIf="!hasError('zipcode', 'required') &&lossPayeeAdd.controls.zipcode.invalid && (lossPayeeAdd.controls.zipcode.dirty || lossPayeeAdd.controls.zipcode.touched)">
                                            ZIP code is required
                                        </mat-error>
                                    </mat-form-field>

                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </mat-expansion-panel>
            <button mat-raised-button id="save" class="mt-3 btn btn-primary btn-next float-right"
                (click)="submit(lossPayeeAdd)">
                <span>Save</span>
            </button>
            <button mat-button mat-raised-button id="cancel" (click)="closeLossPayee()"
                class="mt-3 btn float-left">
                <span>Cancel</span>
            </button>
        </mat-accordion>
    </form>
</div>
